<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="cms.css" rel="stylesheet" type="text/css">
    <link href="elements/dragNDrop/dragNDrop.css" rel="stylesheet" type="text/css">
    <link href="elements/dropDown/dropDown.css" rel="stylesheet" type="text/css">
    <title>Content Management</title>
</head>
<body>
    <iframe id ="dynamicView" src="./dynamicView.html"></iframe>
    <h1>Content Management</h1>
    
    <div id="generate"><button>save new content</button></div>
    
    <div id="menu" class="selectMove">
        <div>
            <h2>Sections</h2>
            <p>Add or remove sections to your menu, which defines the page structure. The refered section needs to exists.</p>
        </div>
        <ul></ul>
    </div>

    <div id="slider">
        <h2>edit content of type slider</h2>
        <div class="content">
            <h3>Start</h3>
            <div class="describedInput"><span>bigger headline</span><input placeholder="enter a headline"></div>
        </div>
        <div class="content">
            <h3>Bildgallerie</h3>
            <div class="describedInput"><span>bigger headline</span><input placeholder="enter a headline"></div>
        </div>
        <button>add new slider</button>
    </div>

</body>
<script type="module">

    import * as edit from "./js/site.js"
    import * as persistenceUtil from "./js/persistenceUtil.js"

    edit.loadContent()

    persistenceUtil.copyHtml("../content/index.html")
    
    document.getElementsByTagName("iframe")[0].contentWindow.location.reload()

    const refresh = () => {
            setTimeout(() => {
                for(let brick in edit.bricks) {
                    if (edit.bricks[brick].changed) {
                        edit.bricks[brick].changed = false
                        // bessere Methode um script neu auszuf√ºhren?
                        persistenceUtil.copyHtml("./dynamicView.html")
                    }
                }                
                refresh()
            }, 2000);
        }
        refresh()

</script>

</html>